# Contest Flow - Visual Guide

## ğŸ® Complete User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER JOURNEY                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Login
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚ â”€â”€â–¶ Logs in via Better Auth
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: Create Contest
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Dashboard â”‚ â”€â”€â–¶ Clicks "Create Contest"
â”‚          â”‚     Fills form:
â”‚          â”‚     - Name: "Quick Battle"
â”‚          â”‚     - Type: Quick Fire âš¡
â”‚          â”‚     - Difficulty: Medium
â”‚          â”‚     - Questions: 10
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: Start Contest
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lobby   â”‚ â”€â”€â–¶ Clicks "Start Contest"
â”‚          â”‚     â†“
â”‚          â”‚     Frontend calls: /api/contest/create-realtime
â”‚          â”‚     â†“
â”‚          â”‚     Next.js proxies to Go service
â”‚          â”‚     â†“
â”‚          â”‚     Go creates room, returns contest ID
â”‚          â”‚     â†“
â”‚          â”‚     Redirects to: /dashboard/contest/{id}/game
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: WebSocket Connection
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Game Page â”‚ â”€â”€â–¶ Calls: /api/contest/token
â”‚          â”‚     â†“
â”‚          â”‚     Gets JWT from Go service
â”‚          â”‚     â†“
â”‚          â”‚     Connects WebSocket:
â”‚          â”‚     ws://localhost:8080/ws/contests/{id}?token={jwt}
â”‚          â”‚     â†“
â”‚          â”‚     Shows waiting room
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 5: Game Start
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lobby   â”‚ â”€â”€â–¶ Host clicks "Start Game"
â”‚          â”‚     Sends: {type: "START_GAME"}
â”‚          â”‚     â†“
â”‚          â”‚     Go Hub receives message
â”‚          â”‚     â†“
â”‚          â”‚     Broadcasts: CONTEST_STARTED
â”‚          â”‚     â†“
â”‚          â”‚     All players enter game mode
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 6: Question Loop
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Question  â”‚ â”€â”€â–¶ Go Hub sends: NEW_QUESTION
â”‚          â”‚     â†“
â”‚          â”‚     All players see question
â”‚          â”‚     â†“
â”‚          â”‚     Timer starts (15 seconds)
â”‚          â”‚     â†“
â”‚Player 1  â”‚     Player submits: {type: "SUBMIT_ANSWER", answer: "Paris"}
â”‚answers   â”‚     â†“
â”‚          â”‚     Go validates answer
â”‚          â”‚     â†“
â”‚          â”‚     IF CORRECT:
â”‚          â”‚       - Calculate points (speed-based)
â”‚          â”‚       - Send ANSWER_RESULT to player
â”‚          â”‚       - Broadcast SCORE_UPDATE to all
â”‚          â”‚       - Move to next question
â”‚          â”‚     â†“
â”‚          â”‚     IF WRONG:
â”‚          â”‚       - Send ANSWER_RESULT (incorrect)
â”‚          â”‚       - Player waits for next question
â”‚          â”‚     â†“
â”‚          â”‚     Repeat for all questions
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 7: Game Over
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Results â”‚ â”€â”€â–¶ Last question completed
â”‚          â”‚     â†“
â”‚          â”‚     Go Hub calculates final scores
â”‚          â”‚     â†“
â”‚          â”‚     Broadcasts: GAME_OVER
â”‚          â”‚     â†“
â”‚          â”‚     Shows final scoreboard
â”‚          â”‚     â†“
â”‚          â”‚     After 5 seconds:
â”‚          â”‚     Redirects to leaderboard
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Technical Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TECHNICAL ARCHITECTURE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser UI    â”‚
â”‚  (React/Next)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1. Login
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Better Auth (Next.js)    â”‚
â”‚    Returns session cookie   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 2. Create quick_fire contest
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /api/contest/create-realtimeâ”‚â—€â”€â”€â”€ Frontend calls
â”‚  - Validates user session    â”‚
â”‚  - Gets JWT from Go service  â”‚
â”‚  - Calls Go /api/contests    â”‚
â”‚  - Returns contest ID        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 3. HTTP Request
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Go Service: /api/contests â”‚
â”‚   - Validates JWT            â”‚
â”‚   - Creates contest hub      â”‚
â”‚   - Fetches questions        â”‚
â”‚   - Returns WebSocket URL    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 4. Frontend redirects to game
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Game Page Component       â”‚
â”‚   - Gets JWT token          â”‚
â”‚   - Opens WebSocket         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 5. WebSocket Upgrade
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Go: /ws/contests/{id}       â”‚
â”‚ - Validates JWT             â”‚
â”‚ - Creates client            â”‚
â”‚ - Registers with hub        â”‚
â”‚ - Starts read/write pumps   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 6. Messages flow
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Contest Hub (Go)       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Player Clients     â”‚   â”‚
â”‚  â”‚  â”œâ”€ Client 1        â”‚   â”‚
â”‚  â”‚  â”œâ”€ Client 2        â”‚   â”‚
â”‚  â”‚  â””â”€ Client 3        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â”‚
â”‚  Game Logic:                â”‚
â”‚  - Question delivery        â”‚
â”‚  - Answer validation        â”‚
â”‚  - Score calculation        â”‚
â”‚  - Broadcast updates        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚         â”‚
         â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL  â”‚          â”‚    Redis     â”‚
â”‚ - Users     â”‚          â”‚  - Pub/Sub   â”‚
â”‚ - Questions â”‚          â”‚  - Scaling   â”‚
â”‚ - Results   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¨ Message Flow Example

```
SCENARIO: Player answers question correctly

Step 1: Player clicks answer
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser JS  â”‚
â”‚              â”‚
â”‚ User clicks  â”‚
â”‚ "Paris"      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ ws.send()
       â–¼
{
  type: "SUBMIT_ANSWER",
  question_id: "q123",
  answer: "Paris"
}
       â”‚
       â”‚ WebSocket
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Go: ReadPump     â”‚
â”‚   - Reads message  â”‚
â”‚   - Parses JSON    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Forward to Hub
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Hub: HandleAnswer()      â”‚
â”‚   - Get question           â”‚
â”‚   - Check if correct       â”‚
â”‚   - "Paris" == "Paris" âœ“   â”‚
â”‚   - Calculate points       â”‚
â”‚   - Time taken: 2.5s       â”‚
â”‚   - Points: 850/1000       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                    â”‚                  â”‚
         â–¼                    â–¼                  â–¼
Send to Player        Broadcast to All   Save to DB
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ANSWER_RESULT â”‚    â”‚  SCORE_UPDATE   â”‚ â”‚PostgreSQLâ”‚
â”‚              â”‚    â”‚                 â”‚ â”‚          â”‚
â”‚is_correct:   â”‚    â”‚user: "player1"  â”‚ â”‚UPDATE    â”‚
â”‚  true        â”‚    â”‚score: 850       â”‚ â”‚scores    â”‚
â”‚              â”‚    â”‚                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚points: 850   â”‚    â”‚points: 850      â”‚
â”‚              â”‚    â”‚                 â”‚
â”‚new_score:    â”‚    â”‚Sent to:         â”‚
â”‚  850         â”‚    â”‚- Player 1       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚- Player 2       â”‚
       â”‚            â”‚- Player 3       â”‚
       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚
       â”‚ WebSocket           â”‚ WebSocket
       â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Player's      â”‚    â”‚ All Players'    â”‚
â”‚Browser       â”‚    â”‚ Browsers        â”‚
â”‚              â”‚    â”‚                 â”‚
â”‚Shows:        â”‚    â”‚Update:          â”‚
â”‚"Correct! +850â”‚    â”‚Scoreboard       â”‚
â”‚             "â”‚    â”‚Player 1: 850    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Scoring Algorithm

```
Max Points per Question: 1000
Timer: 15 seconds

Formula:
  basePoints = 1000
  timeBonus = (15 - timeInSeconds) / 15
  finalPoints = basePoints * (0.3 + 0.7 * timeBonus)

Examples:
  Answer in 1 second:  1000 * (0.3 + 0.7 * 0.93) = 951 points
  Answer in 5 seconds: 1000 * (0.3 + 0.7 * 0.67) = 769 points
  Answer in 10 seconds: 1000 * (0.3 + 0.7 * 0.33) = 531 points
  Answer in 15 seconds: 1000 * (0.3 + 0.7 * 0.00) = 300 points

Key Points:
- Faster answers = more points
- Minimum 300 points (even at timeout)
- Maximum 1000 points (instant answer)
- Speed matters!
```

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AUTHENTICATION CHAIN                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. User logs into Next.js
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Better Auth  â”‚ â”€â”€â–¶ Session cookie created
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. User wants to join contest
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Next.js API  â”‚ â”€â”€â–¶ Validates session cookie
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      If valid, proceed

3. Next.js calls Go service
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ /api/contest â”‚ â”€â”€â–¶ Calls Go /login
   â”‚ /token       â”‚     with username
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. Go service generates JWT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Go: /login   â”‚ â”€â”€â–¶ Creates JWT token
   â”‚              â”‚     Signs with JWT_SECRET
   â”‚              â”‚     Expires in 2 hours
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. Frontend gets JWT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Game Page    â”‚ â”€â”€â–¶ Stores JWT token
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

6. WebSocket connection
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ws://...?    â”‚ â”€â”€â–¶ JWT in query param
   â”‚ token={jwt}  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

7. Go validates JWT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ JWT          â”‚ â”€â”€â–¶ Verifies signature
   â”‚ Middleware   â”‚     Checks expiration
   â”‚              â”‚     Extracts userID
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

8. Connection established
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Client       â”‚ â”€â”€â–¶ Authenticated!
   â”‚ Registered   â”‚     Can play game
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CRITICAL: JWT_SECRET must match in both services!
  Next.js:  QUIZ_JWT_SECRET
  Go:       JWT_SECRET
```

## ğŸš€ Startup Sequence

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SERVICE STARTUP ORDER                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Terminal 1: Redis
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ redis-server     â”‚
â”‚                  â”‚
â”‚ Port: 6379       â”‚
â”‚ Status: Running  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ Must be running first!
        â–¼

Terminal 2: Go WebSocket Service
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ go run main.go   â”‚
â”‚                  â”‚
â”‚ Port: 8080       â”‚
â”‚ â”œâ”€ Load config   â”‚
â”‚ â”œâ”€ Connect DB    â”‚
â”‚ â”œâ”€ Connect Redis â”‚
â”‚ â”œâ”€ Start Hub     â”‚
â”‚ â””â”€ Listen HTTP   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ Ready to accept connections
        â–¼

Terminal 3: Next.js
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ pnpm dev         â”‚
â”‚                  â”‚
â”‚ Port: 3000       â”‚
â”‚ â”œâ”€ Build         â”‚
â”‚ â”œâ”€ Init Auth     â”‚
â”‚ â””â”€ Listen HTTP   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ Application ready!
        â–¼

Open Browser
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ localhost:3000   â”‚
â”‚                  â”‚
â”‚ âœ“ Login          â”‚
â”‚ âœ“ Create Contest â”‚
â”‚ âœ“ Play Game      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Data Storage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA PERSISTENCE                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PostgreSQL (Shared by both services)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tables:                          â”‚
â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ users        â”‚ â—€â”€ Next.js     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ contest      â”‚ â—€â”€ Next.js     â”‚
â”‚  â”‚ (metadata)   â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ questions    â”‚ â—€â”€ Go Service  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ contest_     â”‚ â—€â”€ Go Service  â”‚
â”‚  â”‚ results      â”‚    (final)     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ player_      â”‚ â—€â”€ Go Service  â”‚
â”‚  â”‚ answers      â”‚    (live)      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Redis (Go Service only)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Purpose: Real-time Pub/Sub      â”‚
â”‚                                   â”‚
â”‚  Channels:                        â”‚
â”‚  - contest:{id}:messages          â”‚
â”‚  - contest:{id}:scores            â”‚
â”‚                                   â”‚
â”‚  Benefits:                        â”‚
â”‚  - Horizontal scaling             â”‚
â”‚  - Multiple Go instances          â”‚
â”‚  - Load balancing                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This visual guide should help you understand exactly how everything flows together! ğŸ‰
